{
  "evaluation_metadata": {
    "evaluation_timestamp": "2025-07-25T00:33:03.846233",
    "configuration": {
      "primary_model": "Facenet",
      "fallback_model": "GhostFaceNet",
      "primary_detector": "mtcnn",
      "distance_metric": "cosine",
      "similarity_threshold": 0.68,
      "top_k_matches": 5,
      "augmentation_enabled": true,
      "sphere_lighting_enabled": true,
      "enhanced_fallback_enabled": true,
      "ambiguity_distance_threshold": 0.1,
      "max_recognized_threshold": 1
    }
  },
  "processing_statistics": {
    "total_query_images": 18,
    "successfully_processed": 18,
    "processing_failures": 0,
    "processing_success_rate": 1.0
  },
  "recognition_statistics": {
    "faces_recognized": 18,
    "faces_unrecognized": 0,
    "recognition_rate": 1.0,
    "overall_success_rate": 1.0
  },
  "enhanced_model_performance": {
    "model_usage_distribution": {
      "Facenet": 15,
      "GhostFaceNet": 3
    },
    "fallback_usage_count": 3,
    "fallback_usage_rate": 0.167,
    "enhanced_fallback_count": 2,
    "enhanced_fallback_rate": 0.111,
    "fallback_reasons": {
      "ambiguity_detected": 2,
      "primary_failed": 1
    },
    "dual_embeddings_available_count": 18,
    "dual_embeddings_rate": 1.0
  },
  "ambiguity_analysis": {
    "ambiguous_results_count": 4,
    "ambiguity_rate": 0.222,
    "ambiguity_reasons": {
      "Close distances: 0.08 < 0.1": 3,
      "Multiple valid matches: 2": 1
    },
    "enhanced_fallback_effectiveness": 0.5
  },
  "confidence_analysis": {
    "mean_confidence": 0.716861633402992,
    "median_confidence": 0.728310744819437,
    "std_confidence": 0.08671855400052601,
    "min_confidence": 0.524506075955488,
    "max_confidence": 0.844721840111633,
    "confidence_distribution": {
      "very_high (>0.9)": 0,
      "high (0.8-0.9)": 4,
      "medium (0.7-0.8)": 8,
      "low (0.6-0.7)": 3,
      "very_low (<0.6)": 3
    }
  },
  "distance_analysis": {
    "mean_distance": 0.283138366597008,
    "median_distance": 0.27168925518056297,
    "std_distance": 0.08671855400052601,
    "min_distance": 0.15527815988836702,
    "max_distance": 0.47549392404451196
  },
  "per_person_performance": {
    "person1": {
      "recognized_count": 13,
      "total_queries": 0,
      "avg_confidence": 0.7090297858747413,
      "avg_distance": 0.2909702141252587,
      "confidences": [
        0.5889435468203233, 0.7287251308263989, 0.8263471830117575
      ],
      "distances": [
        0.41105645317967665, 0.2712748691736011, 0.17365281698824253
      ]
    },
    "person2": {
      "recognized_count": 2,
      "total_queries": 0,
      "avg_confidence": 0.7364867770127673,
      "avg_distance": 0.2635132229872327,
      "confidences": [0.7776952167335979, 0.6952783372919368],
      "distances": [0.22230478326640213, 0.3047216627080632]
    },
    "person3": {
      "recognized_count": 3,
      "total_queries": 0,
      "avg_confidence": 0.7377162102855616,
      "avg_distance": 0.2622837897144386,
      "confidences": [
        0.7386392107254433, 0.6723815824292236, 0.8021278377020173
      ],
      "distances": [
        0.26136078927455675, 0.32761841757077637, 0.19787216229798266
      ]
    }
  },
  "enhanced_database_statistics": {
    "total_persons_in_db": 3,
    "total_embeddings_in_db": 285,
    "primary_model_embeddings": 147,
    "fallback_model_embeddings": 138,
    "avg_embeddings_per_person": 95.0,
    "sphere_lighting_augmentations": 72,
    "brightness_augmentations": 108
  },
  "detailed_results": [
    {
      "success": true,
      "query_image": "sample_images\\20250630_175850.jpg",
      "query_embedding_info": {
        "model_used": "GhostFaceNet",
        "detector_used": "retinaface",
        "fallback_used": true,
        "fallback_reason": "ambiguity_detected",
        "embedding_dimension": 128,
        "dual_embeddings_available": true
      },
      "total_matches_found": 3,
      "valid_matches_count": 1,
      "top_matches": [
        {
          "person_id": "person1",
          "embedding_id": "person1_25",
          "distance": 0.38105645317967665,
          "similarity_score": 0.6189435468203233,
          "model_used": "GhostFaceNet",
          "detector_used": "retinaface",
          "image_path": "face_database\\person1\\person1_3.jpg",
          "augmentation_type": "sphere_left_brightness_1.2",
          "fallback_used": true
        },
        {
          "person_id": "person2",
          "embedding_id": "person2_18",
          "distance": 0.6403629641461803,
          "similarity_score": 0.3596370358538197,
          "model_used": "GhostFaceNet",
          "detector_used": "retinaface",
          "image_path": "face_database\\person2\\person2_2.jpg",
          "augmentation_type": "sphere_top",
          "fallback_used": true
        },
        {
          "person_id": "person3",
          "embedding_id": "person3_10",
          "distance": 0.8872224854103665,
          "similarity_score": 0.11277751458963348,
          "model_used": "GhostFaceNet",
          "detector_used": "retinaface",
          "image_path": "face_database\\person3\\person3_1.jpg",
          "augmentation_type": "original",
          "fallback_used": true
        }
      ],
      "best_match": {
        "person_id": "person1",
        "embedding_id": "person1_25",
        "distance": 0.38105645317967665,
        "similarity_score": 0.6189435468203233,
        "model_used": "GhostFaceNet",
        "detector_used": "retinaface",
        "image_path": "face_database\\person1\\person1_3.jpg",
        "augmentation_type": "sphere_left_brightness_1.2",
        "fallback_used": true
      },
      "is_recognized": true,
      "confidence": 0.6189435468203233,
      "ambiguity_analysis": {
        "is_ambiguous": true,
        "reasons": ["Multiple valid matches: 2"],
        "should_use_fallback": true
      },
      "enhanced_fallback_used": true,
      "processing_timestamp": "2025-07-25T00:31:26.590504"
    }
  ]
}
